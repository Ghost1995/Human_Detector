\hypertarget{app_2main_8cpp}{}\section{app/main.cpp File Reference}
\label{app_2main_8cpp}\index{app/main.\+cpp@{app/main.\+cpp}}
{\ttfamily \#include $<$Data.\+hpp$>$}\\*
{\ttfamily \#include $<$Train.\+hpp$>$}\\*
{\ttfamily \#include $<$Detect.\+hpp$>$}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{app_2main_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4}{main} ()
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{app/main.\+cpp@{app/main.\+cpp}!main@{main}}
\index{main@{main}!app/main.\+cpp@{app/main.\+cpp}}
\subsubsection[{\texorpdfstring{main()}{main()}}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{app_2main_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4}{}\label{app_2main_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4}

\begin{DoxyCode}
42            \{
43     \textcolor{comment}{// Project starts}
44     std::cout << \textcolor{stringliteral}{"This is a Human Detection Project."} << std::endl;
45     std::cout << \textcolor{stringliteral}{"It uses a SVM classifier trained using "} <<
46                  \textcolor{stringliteral}{"HOG features to detect Humans."} << std:: endl;
47     std::cout << std::endl;
48 
49     \textcolor{comment}{// Train or Test a classifier}
50     std::cout << \textcolor{stringliteral}{"Do you want to Train a Classifier? (y/n): "};
51     std::string trainDetector;
52     getline(std::cin, trainDetector);
53     std::transform(trainDetector.begin(), trainDetector.end(),
54                    trainDetector.begin(), ::tolower);
55     \textcolor{keywordflow}{if} (trainDetector == \textcolor{stringliteral}{"yes"} || trainDetector == \textcolor{stringliteral}{"y"}) \{
56         \textcolor{comment}{// Define a window/image size}
57         cv::Size windowSize = cv::Size(96, 160);
58 
59         \textcolor{comment}{// Set directory for Positive Images}
60         std::cout << \textcolor{stringliteral}{"Give the Path for Positive Training Images "} <<
61         \textcolor{stringliteral}{"(Default is set as '../data/INRIAPerson/Train/pos/'): "};
62         std::string posDir;
63         getline(std::cin, posDir);
64         \textcolor{keywordflow}{if} (posDir.empty())
65             posDir = \textcolor{stringliteral}{"../data/INRIAPerson/Train/pos/"};
66 
67         \textcolor{comment}{// Set directory for Annotations}
68         std::cout << \textcolor{stringliteral}{"Give the Path for Annotations for Positive "} <<
69                      \textcolor{stringliteral}{"Training Images (Default is set as "} <<
70                      \textcolor{stringliteral}{"'../data/INRIAPerson/Train/annotations/'): "};
71         std::string annotationPath;
72         getline(std::cin, annotationPath);
73         \textcolor{keywordflow}{if} (annotationPath.empty())
74             annotationPath = \textcolor{stringliteral}{"../data/INRIAPerson/Train/annotations/"};
75 
76         \textcolor{comment}{// Set directory for Negative Images}
77         std::cout << \textcolor{stringliteral}{"Give the Path for Negative Training Images "} <<
78         \textcolor{stringliteral}{"(Default is set as '../data/INRIAPerson/Train/neg/'): "};
79         std::string negDir;
80         getline(std::cin, negDir);
81         \textcolor{keywordflow}{if} (negDir.empty())
82             negDir = \textcolor{stringliteral}{"../data/INRIAPerson/Train/neg/"};
83 
84         \textcolor{comment}{// Load positive images}
85         \hyperlink{classData}{Data} allData;
86         std::cout << \textcolor{stringliteral}{"Loading Positive Images"} << std::endl;
87         allData.\hyperlink{classData_a30cb7a53ab253a2f7e477ac13fe4c3e3}{loadPosImages}(static\_cast<cv::String>(annotationPath),
88                             static\_cast<cv::String>(posDir), windowSize, \textcolor{keyword}{true});
89         \textcolor{comment}{// Check if images were successfully loaded}
90         \textcolor{keywordflow}{if} (allData.\hyperlink{classData_a42bd07ac68b6b13b10b1e1b53a9c682c}{posImgList}.size() > 0) \{
91             std::cout << \textcolor{stringliteral}{"Loading Positive Training Data Complete"} << std::endl;
92         \} \textcolor{keywordflow}{else} \{
93             std::cout << \textcolor{stringliteral}{"No images found. "} <<
94                     \textcolor{stringliteral}{"Please check the Path Directory: "} << posDir << std::endl;
95             \textcolor{keywordflow}{return} 0;
96         \}
97 
98         \textcolor{comment}{// Now load negative images}
99         std::cout << \textcolor{stringliteral}{"Loading Negative Images"} << std::endl;
100         allData.\hyperlink{classData_a7a9b971dd776aa4086174ea2704bacd5}{loadNegImages}(static\_cast<cv::String>(negDir), windowSize);
101         \textcolor{keywordflow}{if} (allData.\hyperlink{classData_a64003b8f6c1cf3a3788e817a9727e5b7}{negImgList}.size() > 0) \{
102             std::cout << \textcolor{stringliteral}{"Loading Negative Training Data Complete"} << std::endl;
103         \} \textcolor{keywordflow}{else} \{
104             std::cout << \textcolor{stringliteral}{"No images found. "} <<
105                     \textcolor{stringliteral}{"Please check the Path Directory: "} << negDir << std::endl;
106             \textcolor{keywordflow}{return} 0;
107         \}
108 
109         \textcolor{comment}{// Start with the training}
110         \hyperlink{classTrain}{Train} trainClass;
111         \textcolor{comment}{// For Positive Images}
112         std::cout << \textcolor{stringliteral}{"Extracting HOG features and storing in a "} <<
113                      \textcolor{stringliteral}{"vector for Positive Images"} << std::endl;
114         trainClass.\hyperlink{classTrain_a6a98a6bbafe06950a62d5825a7eda62f}{getHOGfeatures}(windowSize, allData.\hyperlink{classData_a42bd07ac68b6b13b10b1e1b53a9c682c}{posImgList});
115         \textcolor{comment}{// Assign Positive labels}
116         \textcolor{keywordtype}{size\_t} positiveCount = trainClass.\hyperlink{classTrain_ae4c540cf58c0252745f527f7aca267d4}{gradientList}.size();
117         trainClass.\hyperlink{classTrain_a94e850beee52059be00a4fd9068cb223}{labels}.assign(positiveCount, 1);
118         std::cout << \textcolor{stringliteral}{"Done getting HOG Features for Positive Images"} <<
119                                                                 std::endl;
120 
121         \textcolor{comment}{// For Negative Images}
122         std::cout << \textcolor{stringliteral}{"Extracting HOG features and storing in a "} <<
123                      \textcolor{stringliteral}{"vector for Negative Images"} << std::endl;
124         trainClass.\hyperlink{classTrain_a6a98a6bbafe06950a62d5825a7eda62f}{getHOGfeatures}(windowSize, allData.\hyperlink{classData_a64003b8f6c1cf3a3788e817a9727e5b7}{negImgList});
125         \textcolor{comment}{// Assign Negative labels}
126         \textcolor{keywordtype}{size\_t} negativeCount = trainClass.\hyperlink{classTrain_ae4c540cf58c0252745f527f7aca267d4}{gradientList}.size() - positiveCount;
127         trainClass.\hyperlink{classTrain_a94e850beee52059be00a4fd9068cb223}{labels}.insert(trainClass.\hyperlink{classTrain_a94e850beee52059be00a4fd9068cb223}{labels}.end(), negativeCount, -1);
128         std::cout << \textcolor{stringliteral}{"Done getting HOG Features for Negative Images"} <<
129                                                                 std::endl;
130 
131         \textcolor{comment}{// Ask the user if the classifier is to be saved}
132         std::cout << \textcolor{stringliteral}{"Do you want to Save the Trained Classifier? (y/n): "};
133         std::string saveClassifier;
134         getline(std::cin, saveClassifier);
135         std::transform(saveClassifier.begin(), saveClassifier.end(),
136                        saveClassifier.begin(), ::tolower);
137         \textcolor{keywordflow}{if} (saveClassifier == \textcolor{stringliteral}{"yes"} || saveClassifier == \textcolor{stringliteral}{"y"}) \{
138             \textcolor{comment}{// Get path for the classifier}
139             std::cout << \textcolor{stringliteral}{"Give the Path for the Location where the "} <<
140             \textcolor{stringliteral}{"Classifier is to be Saved (Default is set as "} <<
141             \textcolor{stringliteral}{"'../data/classifier/svmClassifier'): "};
142             std::string svmName;
143             getline(std::cin, svmName);
144             \textcolor{keywordflow}{if} (svmName.empty())
145                 svmName = \textcolor{stringliteral}{"../data/classifier/svmClassifier"};
146 
147             \textcolor{comment}{// Start training the SVM classifier}
148             trainClass.\hyperlink{classTrain_a7a7755ffab3240048df164cb4dff409c}{trainSVM}(\textcolor{keyword}{true}, svmName);
149         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (saveClassifier == \textcolor{stringliteral}{"no"} || saveClassifier == \textcolor{stringliteral}{"n"}) \{
150             \textcolor{comment}{// Start training the SVM classifier}
151             trainClass.\hyperlink{classTrain_a7a7755ffab3240048df164cb4dff409c}{trainSVM}(\textcolor{keyword}{false}, \textcolor{stringliteral}{""});
152         \} \textcolor{keywordflow}{else} \{
153             std::cout << \textcolor{stringliteral}{"Invalid Input"} << std::endl;
154             \textcolor{keywordflow}{return} 0;
155         \}
156 
157         \textcolor{comment}{// Set directory for Testing Images}
158         std::cout << \textcolor{stringliteral}{"Give the Path for Testing Images "} <<
159         \textcolor{stringliteral}{"(Default is set as '../data/INRIAPerson/Test/pos/'): "};
160         std::string testDir;
161         getline(std::cin, testDir);
162         \textcolor{keywordflow}{if} (testDir.empty())
163             testDir = \textcolor{stringliteral}{"../data/INRIAPerson/Test/pos/"};
164 
165         \textcolor{comment}{// Test Classifier}
166         \hyperlink{classDetect}{Detect} detector;
167         detector.\hyperlink{classDetect_ad7d55a57eca5ee84b37c1ea00489f770}{hog\_user}.winSize = windowSize;
168         detector.\hyperlink{classDetect_ad7d55a57eca5ee84b37c1ea00489f770}{hog\_user}.cellSize = cv::Size(8, 8);
169         detector.\hyperlink{classDetect_ad7d55a57eca5ee84b37c1ea00489f770}{hog\_user}.setSVMDetector(trainClass.\hyperlink{classTrain_a72251742e0ed3d4871dffe8a05ebbc8c}{getClassifier}());
170         cv::Rect r = detector.\hyperlink{classDetect_aa04e736f215a89c0cd164e0465bf9f44}{testClassifier}(static\_cast<cv::String>(testDir),
171                                              cv::Size(), \textcolor{keyword}{true}, \textcolor{stringliteral}{"User"});
172         std::cout << \textcolor{stringliteral}{"Program Finshed"} << std::endl;
173     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (trainDetector == \textcolor{stringliteral}{"no"} || trainDetector == \textcolor{stringliteral}{"n"}) \{
174         \textcolor{comment}{// Define a window/image size}
175         cv::Size windowSize = cv::Size(96, 160);
176 
177         \textcolor{comment}{// Ask the user if Default classifier is to be used}
178         std::cout << \textcolor{stringliteral}{"Do yo want to use OpenCV's Default "} <<
179                      \textcolor{stringliteral}{"People Detector Classifier? (y/n): "};
180         std::string defaultClassifier;
181         getline(std::cin, defaultClassifier);
182         std::transform(defaultClassifier.begin(), defaultClassifier.end(),
183                        defaultClassifier.begin(), ::tolower);
184         \textcolor{keywordflow}{if} (defaultClassifier == \textcolor{stringliteral}{"yes"} || defaultClassifier == \textcolor{stringliteral}{"y"}) \{
185             \textcolor{comment}{// Set directory for Testing Images}
186             std::cout << \textcolor{stringliteral}{"Give the Path for Testing Images "} <<
187             \textcolor{stringliteral}{"(Default is set as '../data/test/pos/'): "};
188             std::string testDir;
189             getline(std::cin, testDir);
190             \textcolor{keywordflow}{if} (testDir.empty())
191                 testDir = \textcolor{stringliteral}{"../data/test/pos/"};
192 
193             \textcolor{comment}{// Test Classifier}
194             \hyperlink{classDetect}{Detect} detector;
195             cv::Rect r = detector.\hyperlink{classDetect_aa04e736f215a89c0cd164e0465bf9f44}{testClassifier}(testDir, cv::Size(),
196                                                  \textcolor{keyword}{true}, \textcolor{stringliteral}{"Default"});
197             std::cout << \textcolor{stringliteral}{"Finshed"} << std::endl;
198         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (defaultClassifier == \textcolor{stringliteral}{"no"} || defaultClassifier == \textcolor{stringliteral}{"n"}) \{
199             \textcolor{comment}{// Ask the user for the path to the classifier}
200             std::cout << \textcolor{stringliteral}{"Give the Path for the Classifier "} <<
201             \textcolor{stringliteral}{"(Default is set as '../data/classifier/svmClassifier'): "};
202             std::string svmName;
203             getline(std::cin, svmName);
204             \textcolor{keywordflow}{if} (svmName.empty())
205                 svmName = \textcolor{stringliteral}{"../data/classifier/svmClassifier"};
206 
207             \textcolor{comment}{// Initialize the classifier}
208             \hyperlink{classTrain}{Train} trainClass;
209             trainClass.\hyperlink{classTrain_af48556029dbb829b97e52a47c38f5dec}{classifier} = cv::ml::SVM::load(svmName);
210 
211             \textcolor{comment}{// Set directory for Testing Images}
212             std::cout << \textcolor{stringliteral}{"Give the Path for Testing Images "} <<
213             \textcolor{stringliteral}{"(Default is set as '../data/test/pos/'): "};
214             std::string testDir;
215             getline(std::cin, testDir);
216             \textcolor{keywordflow}{if} (testDir.empty())
217                 testDir = \textcolor{stringliteral}{"../data/test/pos/"};
218 
219             \textcolor{comment}{// Test Classifier}
220             \hyperlink{classDetect}{Detect} detector;
221             detector.\hyperlink{classDetect_ad7d55a57eca5ee84b37c1ea00489f770}{hog\_user}.winSize = windowSize;
222             detector.\hyperlink{classDetect_ad7d55a57eca5ee84b37c1ea00489f770}{hog\_user}.cellSize = cv::Size(8, 8);
223             detector.\hyperlink{classDetect_ad7d55a57eca5ee84b37c1ea00489f770}{hog\_user}.setSVMDetector(trainClass.\hyperlink{classTrain_a72251742e0ed3d4871dffe8a05ebbc8c}{getClassifier}());
224             cv::Rect r = detector.\hyperlink{classDetect_aa04e736f215a89c0cd164e0465bf9f44}{testClassifier}(testDir, cv::Size(),
225                                                  \textcolor{keyword}{true}, \textcolor{stringliteral}{"User"});
226             std::cout << \textcolor{stringliteral}{"Finshed"} << std::endl;
227         \} \textcolor{keywordflow}{else} \{
228             std::cout << \textcolor{stringliteral}{"Invalid Input"} << std::endl;
229             \textcolor{keywordflow}{return} 0;
230         \}
231     \} \textcolor{keywordflow}{else} \{
232         std::cout << \textcolor{stringliteral}{"Invalid Input"} << std::endl;
233         \textcolor{keywordflow}{return} 0;
234     \}
235     \textcolor{keywordflow}{return} 0;
236 \}
\end{DoxyCode}
